{
 "<h1>Build FAISS index for k-NN search</h1>\n<p>We want to build the index of <span translate=no>_^_0_^_</span>. We store <span translate=no>_^_1_^_</span> and <span translate=no>_^_2_^_</span> in memory mapped numpy arrays. We find <span translate=no>_^_3_^_</span> nearest to <span translate=no>_^_4_^_</span> using <a href=\"https://github.com/facebookresearch/faiss\">FAISS</a>. FAISS indexes <span translate=no>_^_5_^_</span> and we query it with <span translate=no>_^_6_^_</span>.</p>\n": "<h1>k-NN \u691c\u7d22\u7528\u306e FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210</h1>\n<p>\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u305f\u3044<span translate=no>_^_0_^_</span>.<span translate=no>_^_1_^_</span><span translate=no>_^_2_^_</span>\u30e1\u30e2\u30ea\u306b\u30de\u30c3\u30d7\u3055\u308c\u305fnumpy\u914d\u5217\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002<span translate=no>_^_3_^_</span><span translate=no>_^_4_^_</span><a href=\"https://github.com/facebookresearch/faiss\">FAISS\u3092\u4f7f\u3046\u306e\u306b\u4e00\u756a\u8fd1\u3044\u3068\u601d\u3044\u307e\u3059</a>\u3002<span translate=no>_^_5_^_</span>FAISS\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u3001\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002<span translate=no>_^_6_^_</span></p>\n",
 "<h2>Build FAISS index</h2>\n<p><a href=\"https://github.com/facebookresearch/faiss/wiki/Getting-started\">Getting started</a>, <a href=\"https://github.com/facebookresearch/faiss/wiki/Faster-search\">faster search</a>, and <a href=\"https://github.com/facebookresearch/faiss/wiki/Lower-memory-footprint\">lower memory footprint</a> tutorials on FAISS will help you learn more about FAISS usage.</p>\n": "<h2>FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u30d3\u30eb\u30c9</h2>\n<p><a href=\"https://github.com/facebookresearch/faiss/wiki/Getting-started\">FAISS\u306e\u4f7f\u3044\u65b9</a>\u3001<a href=\"https://github.com/facebookresearch/faiss/wiki/Faster-search\">\u9ad8\u901f\u691c\u7d22</a>\u3001<a href=\"https://github.com/facebookresearch/faiss/wiki/Lower-memory-footprint\">\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u306e\u524a\u6e1b\u306b\u95a2\u3059\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f</a>\u3001FAISS\u306e\u4f7f\u7528\u6cd5\u306b\u3064\u3044\u3066\u3055\u3089\u306b\u5b66\u3076\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002</p>\n",
 "<h2>Gather <span translate=no>_^_0_^_</span> and save them in numpy arrays</h2>\n<p><em>Note that these numpy arrays will take up a lot of space (even few hundred gigabytes) depending on the size of your dataset</em>.</p>\n": "<h2><span translate=no>_^_0_^_</span>\u305d\u308c\u3089\u3092\u96c6\u3081\u3066numpy\u914d\u5217\u306b\u4fdd\u5b58\u3059\u308b</h2>\n<p><em>\u3053\u308c\u3089\u306e\u5927\u91cf\u306e\u914d\u5217\u306f\u3001\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u30b5\u30a4\u30ba\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u3001\uff08\u6570\u767e\u30ae\u30ac\u30d0\u30a4\u30c8\u3067\u3082\uff09\u591a\u304f\u306e\u30b9\u30da\u30fc\u30b9\u3092\u5360\u3081\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044</em>\u3002</p>\n",
 "<p> Load a saved experiment from <a href=\"train_model.html\">train model</a>.</p>\n": "<p><a href=\"train_model.html\">\u4fdd\u5b58\u3057\u305f\u5b9f\u9a13\u3092\u30c8\u30ec\u30a4\u30f3\u30e2\u30c7\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u307f\u307e\u3059</a>\u3002</p>\n",
 "<p><span translate=no>_^_0_^_</span> </p>\n": "<p><span translate=no>_^_0_^_</span></p>\n",
 "<p><span translate=no>_^_0_^_</span> the target labels </p>\n": "<p><span translate=no>_^_0_^_</span>\u30bf\u30fc\u30b2\u30c3\u30c8\u30e9\u30d9\u30eb</p>\n",
 "<p>Add keys to the index; <span translate=no>_^_0_^_</span> </p>\n": "<p>\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002<span translate=no>_^_0_^_</span></p>\n",
 "<p>Add them to the index for fast search </p>\n": "<p>\u7d22\u5f15\u306b\u8ffd\u52a0\u3059\u308b\u3068\u3059\u3070\u3084\u304f\u691c\u7d22\u3067\u304d\u307e\u3059</p>\n",
 "<p>Add to index </p>\n": "<p>\u7d22\u5f15\u306b\u8ffd\u52a0</p>\n",
 "<p>Build an index with Verenoi cell based faster search with compression that doesn&#x27;t store full vectors. </p>\n": "<p>Verenoi \u306e\u30bb\u30eb\u30d9\u30fc\u30b9\u306e\u9ad8\u901f\u691c\u7d22\u3067\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u5727\u7e2e\u3067\u306f\u30d9\u30af\u30c8\u30eb\u5168\u4f53\u306f\u4fdd\u5b58\u3055\u308c\u307e\u305b\u3093\u3002</p>\n",
 "<p>Collect <span translate=no>_^_0_^_</span> </p>\n": "<p>\u53ce\u96c6 <span translate=no>_^_0_^_</span></p>\n",
 "<p>Create configurations object </p>\n": "<p>\u8a2d\u5b9a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210</p>\n",
 "<p>Dimensions of <span translate=no>_^_0_^_</span> </p>\n": "<p>\u306e\u5bf8\u6cd5 <span translate=no>_^_0_^_</span></p>\n",
 "<p>Get <span translate=no>_^_0_^_</span> </p>\n": "<p>\u53d6\u5f97 <span translate=no>_^_0_^_</span></p>\n",
 "<p>Increment the number of collected keys </p>\n": "<p>\u53ce\u96c6\u3057\u305f\u30ad\u30fc\u306e\u6570\u3092\u5897\u3084\u3057\u3066\u304f\u3060\u3055\u3044</p>\n",
 "<p>Initialize configurations </p>\n": "<p>\u69cb\u6210\u3092\u521d\u671f\u5316</p>\n",
 "<p>Input data moved to the device of the model </p>\n": "<p>\u5165\u529b\u30c7\u30fc\u30bf\u3092\u30e2\u30c7\u30eb\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u79fb\u52d5</p>\n",
 "<p>Load custom configurations used in the experiment </p>\n": "<p>\u5b9f\u9a13\u3067\u4f7f\u7528\u3057\u305f\u30ab\u30b9\u30bf\u30e0\u69cb\u6210\u3092\u8aad\u307f\u8fbc\u3080</p>\n",
 "<p>Load the experiment. Replace the run uuid with you run uuid from <a href=\"train_model.html\">training the model</a>. </p>\n": "<p>\u5b9f\u9a13\u3092\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002run UUID <a href=\"train_model.html\">\u3092\u30e2\u30c7\u30eb\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u304b\u3089\u53d6\u5f97\u3057\u305frun uuid \u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</a></p>\n",
 "<p>Load the memory mapped numpy array of keys </p>\n": "<p>\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u305f\u30ad\u30fc\u306enumpy\u914d\u5217\u3092\u30ed\u30fc\u30c9\u3057\u307e\u3059</p>\n",
 "<p>Loop through data </p>\n": "<p>\u30c7\u30fc\u30bf\u3092\u30eb\u30fc\u30d7\u30b9\u30eb\u30fc\u3059\u308b</p>\n",
 "<p>Number of contexts; i.e. number of tokens in the training data minus one. <span translate=no>_^_0_^_</span> for <span translate=no>_^_1_^_</span> </p>\n": "<p>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u6570\u3002\u3064\u307e\u308a\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u5185\u306e\u30c8\u30fc\u30af\u30f3\u6570\u304b\u3089 1 \u3092\u5f15\u3044\u305f\u6570\u3067\u3059\u3002<span translate=no>_^_0_^_</span></p>\u306b\u3068\u3063\u3066 <span translate=no>_^_1_^_</span>\n",
 "<p>Number of keys <span translate=no>_^_0_^_</span> collected </p>\n": "<p><span translate=no>_^_0_^_</span>\u53ce\u96c6\u3055\u308c\u305f\u30ad\u30fc\u306e\u6570</p>\n",
 "<p>Numpy array for <span translate=no>_^_0_^_</span> </p>\n": "<p>\u306e\u30ca\u30f3\u30d4\u30fc\u914d\u5217 <span translate=no>_^_0_^_</span></p>\n",
 "<p>Pick a random sample of keys to train the index with </p>\n": "<p>\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u306b\u4f7f\u7528\u3059\u308b\u30ad\u30fc\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u3093\u3067\u304f\u3060\u3055\u3044</p>\n",
 "<p>Run the model </p>\n": "<p>\u30e2\u30c7\u30eb\u3092\u5b9f\u884c</p>\n",
 "<p>Save keys, <span translate=no>_^_0_^_</span> in the memory mapped numpy array </p>\n": "<p>\u30ad\u30fc\u3092\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u305fnumpy\u914d\u5217\u306b\u4fdd\u5b58 <span translate=no>_^_0_^_</span></p>\n",
 "<p>Save the index </p>\n": "<p>\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4fdd\u5b58\u3059\u308b</p>\n",
 "<p>Save values, <span translate=no>_^_0_^_</span> in the memory mapped numpy array </p>\n": "<p>\u5024\u3092\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3055\u308c\u305fnumpy\u914d\u5217\u306b\u4fdd\u5b58\u3059\u308b <span translate=no>_^_0_^_</span></p>\n",
 "<p>Set model to evaluation mode </p>\n": "<p>\u30e2\u30c7\u30eb\u3092\u8a55\u4fa1\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a</p>\n",
 "<p>Set models for saving/loading </p>\n": "<p>\u4fdd\u5b58/\u8aad\u307f\u8fbc\u307f\u7528\u306e\u30e2\u30c7\u30eb\u3092\u8a2d\u5b9a</p>\n",
 "<p>Specify the experiment to load from </p>\n": "<p>\u30ed\u30fc\u30c9\u5143\u306e\u30c6\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</p>\n",
 "<p>Start the experiment; this is when it actually loads models </p>\n": "<p>\u5b9f\u9a13\u3092\u958b\u59cb\u3057\u307e\u3059\u3002\u3053\u306e\u6642\u70b9\u3067\u3001\u5b9f\u969b\u306b\u30e2\u30c7\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\u3002</p>\n",
 "<p>This experiment is just an evaluation; i.e. nothing is tracked or saved </p>\n": "<p>\u3053\u306e\u5b9f\u9a13\u306f\u5358\u306a\u308b\u8a55\u4fa1\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u4f55\u3082\u8ffd\u8de1\u3082\u4fdd\u5b58\u3082\u3055\u308c\u3066\u3044\u307e\u305b\u3093</p>\n",
 "<p>Train the index to store the keys </p>\n": "<p>\u30ad\u30fc\u3092\u4fdd\u5b58\u3059\u308b\u3088\u3046\u306b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3059\u308b</p>\n",
 "<p>Training data loader </p>\n": "<p>\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u30ed\u30fc\u30c0\u30fc</p>\n",
 "<p>We need to get inputs to the feed forward layer, <span translate=no>_^_0_^_</span> </p>\n": "<p>\u30d5\u30a3\u30fc\u30c9\u30d5\u30a9\u30ef\u30fc\u30c9\u5c64\u3078\u306e\u5165\u529b\u304c\u5fc5\u8981\u3067\u3059\u304c <span translate=no>_^_0_^_</span></p>\n",
 "Build FAISS index for k-NN search": "k-NN \u691c\u7d22\u7528\u306e FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210",
 "This builds the FAISS index with the transformer embeddings.": "\u3053\u308c\u306b\u3088\u308a\u3001\u30c8\u30e9\u30f3\u30b9\u30d5\u30a9\u30fc\u30de\u30fc\u304c\u57cb\u3081\u8fbc\u307e\u308c\u305f FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"
}