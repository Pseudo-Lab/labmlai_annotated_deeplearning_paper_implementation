{
 "<h1>Evaluate k-nearest neighbor language model</h1>\n": "<h1>\u8bc4\u4f30 k \u6700\u8fd1\u90bb\u8bed\u8a00\u6a21\u578b</h1>\n",
 "<h2><span translate=no>_^_0_^_</span>-NN to get <span translate=no>_^_1_^_</span></h2>\n<p>Here we refer to <span translate=no>_^_2_^_</span> as queries, <span translate=no>_^_3_^_</span> as keys and <span translate=no>_^_4_^_</span> as values.</p>\n": "<h2><span translate=no>_^_0_^_</span>-NN \u8981\u5f97\u5230<span translate=no>_^_1_^_</span></h2>\n<p>\u8fd9\u91cc\u6211\u4eec\u79f0<span translate=no>_^_2_^_</span>\u4e4b\u4e3a\u67e5\u8be2\u3001<span translate=no>_^_3_^_</span>\u952e<span translate=no>_^_4_^_</span>\u548c\u503c\u3002</p>\n",
 "<h2>Calculate validation loss</h2>\n<p>We calculate the validation loss of the combined on <span translate=no>_^_0_^_</span>-NN prediction and transformer prediction. The weight given to the <span translate=no>_^_1_^_</span>-NN model is given by <span translate=no>_^_2_^_</span>. It&#x27;s a list of weights and we calculate the validation loss for each.</p>\n": "<h2>\u8ba1\u7b97\u9a8c\u8bc1\u635f\u5931</h2>\n<p>\u6211\u4eec\u8ba1\u7b97\u4e86<span translate=no>_^_0_^_</span>-NN \u9884\u6d4b\u548c\u53d8\u538b\u5668\u9884\u6d4b\u7ec4\u5408\u7684\u9a8c\u8bc1\u635f\u5931\u3002\u5206\u914d\u7ed9<span translate=no>_^_1_^_</span>-NN \u6a21\u578b\u7684\u6743\u91cd\u7531\u7ed9\u51fa<span translate=no>_^_2_^_</span>\u3002\u8fd9\u662f\u4e00\u4e2a\u6743\u91cd\u5217\u8868\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u6743\u91cd\u7684\u9a8c\u8bc1\u635f\u5931\u3002</p>\n",
 "<h2>Load the index</h2>\n": "<h2>\u52a0\u8f7d\u7d22\u5f15</h2>\n",
 "<p>Calculate scores for each of <span translate=no>_^_0_^_</span>. </p>\n": "<p>\u8ba1\u7b97\u6bcf\u9879\u7684\u5206\u6570<span translate=no>_^_0_^_</span>\u3002</p>\n",
 "<p>Calculate the loss </p>\n": "<p>\u8ba1\u7b97\u635f\u5931</p>\n",
 "<p>Dimensions of <span translate=no>_^_0_^_</span> </p>\n": "<p>\u7684\u5c3a\u5bf8<span translate=no>_^_0_^_</span></p>\n",
 "<p>Evaluate validation loss </p>\n": "<p>\u8bc4\u4f30\u9a8c\u8bc1\u635f\u5931</p>\n",
 "<p>Find 10 nearest neighbors of <span translate=no>_^_0_^_</span> among <span translate=no>_^_1_^_</span>. <span translate=no>_^_2_^_</span> is the distance given by FAISS and <span translate=no>_^_3_^_</span>, <span translate=no>_^_4_^_</span> is the index of it in <span translate=no>_^_5_^_</span>. </p>\n": "<p>\u627e\u5230 10 \u4e2a\u6700\u8fd1\u7684\u90bb\u5c45<span translate=no>_^_1_^_</span>\u3002<span translate=no>_^_0_^_</span><span translate=no>_^_2_^_</span>\u662f FAISS \u7ed9\u51fa\u7684\u8ddd\u79bb<span translate=no>_^_3_^_</span>\uff0c<span translate=no>_^_4_^_</span>\u662f\u5176\u4e2d\u7684\u7d22\u5f15<span translate=no>_^_5_^_</span>\u3002</p>\n",
 "<p>Flatten the <span translate=no>_^_0_^_</span> and <span translate=no>_^_1_^_</span> dimensions of queries </p>\n": "<p>\u5c55\u5e73\u67e5\u8be2\u7684<span translate=no>_^_0_^_</span>\u548c<span translate=no>_^_1_^_</span>\u7ef4\u5ea6</p>\n",
 "<p>Get <span translate=no>_^_0_^_</span> </p>\n": "<p>\u5f97\u5230<span translate=no>_^_0_^_</span></p>\n",
 "<p>Get <span translate=no>_^_0_^_</span>-NN predictions </p>\n": "<p>\u83b7\u53d6<span translate=no>_^_0_^_</span>-NN \u9884\u6d4b</p>\n",
 "<p>Get data and target labels </p>\n": "<p>\u83b7\u53d6\u6570\u636e\u548c\u76ee\u6807\u6807\u7b7e</p>\n",
 "<p>Get the dot-product, or cosine similarity </p>\n": "<p>\u83b7\u53d6\u70b9\u79ef\u6216\u4f59\u5f26\u76f8\u4f3c\u5ea6</p>\n",
 "<p>Iterate through validation data </p>\n": "<p>\u904d\u5386\u9a8c\u8bc1\u6570\u636e</p>\n",
 "<p>List of losses for each <span translate=no>_^_0_^_</span> </p>\n": "<p>\u6bcf\u79cd\u7684\u635f\u5931\u6e05\u5355<span translate=no>_^_0_^_</span></p>\n",
 "<p>List of weights given to <span translate=no>_^_0_^_</span>-NN prediction. We will evaluate the validation loss for each of the weights </p>\n": "\u4e3a <p><span translate=no>_^_0_^_</span>-NN \u9884\u6d4b\u8d4b\u4e88\u7684\u6743\u91cd\u5217\u8868\u3002\u6211\u4eec\u5c06\u8bc4\u4f30\u6bcf\u4e2a\u6743\u91cd\u7684\u9a8c\u8bc1\u635f\u5931</p>\n",
 "<p>Load FAISS index </p>\n": "<p>\u52a0\u8f7d FAISS \u6307\u6570</p>\n",
 "<p>Load index </p>\n": "<p>\u8d1f\u8377\u6307\u6570</p>\n",
 "<p>Load memory mapped numpy arrays </p>\n": "<p>\u52a0\u8f7d\u5185\u5b58\u6620\u5c04\u7684 numpy \u6570\u7ec4</p>\n",
 "<p>Load the experiment. Replace the run uuid with you run uuid from <a href=\"train_model.html\">training the model</a>. </p>\n": "<p>\u52a0\u8f7d\u5b9e\u9a8c\u3002\u5c06 run uuid \u66ff\u6362\u4e3a\u4f60\u5728<a href=\"train_model.html\">\u8bad\u7ec3\u6a21\u578b\u65f6\u8fd0\u884c\u7684</a> uuid\u3002</p>\n",
 "<p>Normalize <span translate=no>_^_0_^_</span> </p>\n": "<p>\u89c4\u8303\u5316<span translate=no>_^_0_^_</span></p>\n",
 "<p>Number of contexts; i.e. number of tokens in the training data minus one. <span translate=no>_^_0_^_</span> for <span translate=no>_^_1_^_</span> </p>\n": "<p>\u4e0a\u4e0b\u6587\u7684\u6570\u91cf\uff1b\u5373\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u4ee4\u724c\u6570\u51cf\u4e00\u3002<span translate=no>_^_0_^_</span>\u5bf9\u4e8e<span translate=no>_^_1_^_</span></p>\n",
 "<p>Number of samples </p>\n": "<p>\u6837\u672c\u6570\u91cf</p>\n",
 "<p>Number of samples in each batch </p>\n": "<p>\u6bcf\u6279\u6837\u54c1\u7684\u6570\u91cf</p>\n",
 "<p>Output the losses for each of <span translate=no>_^_0_^_</span>. </p>\n": "<p>\u8f93\u51fa\u6bcf\u4e2a\u7684\u635f\u5931<span translate=no>_^_0_^_</span>\u3002</p>\n",
 "<p>Reshape the logits </p>\n": "<p>\u91cd\u5851 logits</p>\n",
 "<p>Run the model and get predictions <span translate=no>_^_0_^_</span> </p>\n": "<p>\u8fd0\u884c\u6a21\u578b\u5e76\u83b7\u5f97\u9884\u6d4b<span translate=no>_^_0_^_</span></p>\n",
 "<p>Save shape of queries to reshape results </p>\n": "<p>\u4fdd\u5b58\u67e5\u8be2\u5f62\u72b6\u4ee5\u91cd\u5851\u7ed3\u679c</p>\n",
 "<p>Scatter and accumulate token logits based on the nearest neighbors </p>\n": "<p>\u6839\u636e\u6700\u8fd1\u7684\u90bb\u5c45\u5206\u6563\u548c\u7d2f\u79ef\u4ee4\u724c\u65e5\u5fd7</p>\n",
 "<p>Set model to evaluation mode </p>\n": "<p>\u5c06\u6a21\u578b\u8bbe\u7f6e\u4e3a\u8bc4\u4f30\u6a21\u5f0f</p>\n",
 "<p>Set number of cells to probe </p>\n": "<p>\u8bbe\u7f6e\u8981\u63a2\u6d4b\u7684\u7ec6\u80de\u6570\u91cf</p>\n",
 "<p>This is to calculate only the loss for <span translate=no>_^_0_^_</span> tokens. This is important because the first predictions (along the sequence) of transformer model has very few past tokens to look at. </p>\n": "<p>\u8fd9\u662f\u4e3a\u4e86\u53ea\u8ba1\u7b97<span translate=no>_^_0_^_</span>\u4ee3\u5e01\u7684\u635f\u5931\u3002\u8fd9\u4e00\u70b9\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u53d8\u538b\u5668\u6a21\u578b\u7684\u7b2c\u4e00\u4e2a\u9884\u6d4b\uff08\u6cbf\u987a\u5e8f\uff09\u51e0\u4e4e\u6ca1\u6709\u8fc7\u53bb\u7684\u4ee4\u724c\u53ef\u4f9b\u8003\u8651\u3002</p>\n",
 "<p>Token-wise logits </p>\n": "<p>\u4ee4\u724c\u660e\u667a\u7684 logits</p>\n",
 "<p>Training data loader </p>\n": "<p>\u8bad\u7ec3\u6570\u636e\u52a0\u8f7d\u5668</p>\n",
 "<p>We are going to calculate the cosine similarity between normalized vectors </p>\n": "<p>\u6211\u4eec\u5c06\u8ba1\u7b97\u5f52\u4e00\u5316\u5411\u91cf\u4e4b\u95f4\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6</p>\n",
 "Evaluate k-nearest neighbor language model": "\u8bc4\u4f30 k \u6700\u8fd1\u90bb\u8bed\u8a00\u6a21\u578b",
 "This runs the kNN model and merges the kNN results with transformer output to achieve better results than just using the transformer.": "\u8fd9\u5c06\u8fd0\u884c kNN \u6a21\u578b\uff0c\u5e76\u5c06 kNN \u7ed3\u679c\u4e0e\u53d8\u538b\u5668\u8f93\u51fa\u5408\u5e76\uff0c\u4ee5\u83b7\u5f97\u6bd4\u4ec5\u4f7f\u7528\u53d8\u538b\u5668\u66f4\u597d\u7684\u7ed3\u679c\u3002"
}